define ("theme_cass/cass",["jquery","core/ajax","theme_cass/breadcrumb","core/templates","theme_snap/util"],function(a,b,c,d,e){return new function(){(function(){require.config({paths:{"theme_cass/TweenMax":["https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min",function pluginJSURL(a){return M.cfg.wwwroot+"/pluginfile.php/"+M.cfg.contextid+"/theme_cass/"+a}("vendorjs/TweenMax.min")]},shim:{"theme_cass/TweenMax":{exports:"TweenMax"}}})})();var f=this,g=function(b){a(b).show().animate({right:"20px",opacity:1},1e3)},h=function(b){a(b).animate({right:"-600px",opacity:.5},200,function(){a(b).hide()})},i=function(){g("#activitycompletemodal")},j=function(){require(["theme_cass/TweenMax"],function(b){a(".next_activity_overlay").fadeTo("slow",0,function(){a(this).hide()});e.whenTrue(function(){return a("#alertBox").length&&a("#darkBackground").length},function(){var c=a("#alertBox"),d=a("#darkBackground");b.to(d,0,{display:"block"});b.to(d,.3,{background:"rgba(0,0,0,0.4)",force3D:!0});b.to(c,0,{left:"calc(50% - 150px)",top:"calc(50% - 150px)",delay:"0.2"});b.to(c,0,{display:"block",opacity:1,delay:"0.2"});b.to(c,0,{display:"block",scale:.2,opacity:0,delay:"0.2"});b.to(c,.3,{opacity:1,force3D:!0,delay:"0.2"});b.to(c,.3,{scale:1,force3D:!0,delay:"0.2"});b.to(d,.2,{backgroundColor:"rgba(0,0,0,0)",force3D:!0,delay:"2"});b.to(d,.2,{display:"none",force3D:!0,delay:"2"});b.to(c,.2,{opacity:0,display:"none",force3D:!0,delay:"2",onComplete:i})})})};this.addPopCompletion=function(a){if("undefined"!=typeof M.themeCass.settings.nextactivitymodaldialogdelay){if(-1===["page","book","wiki","feedback"].indexOf(a.modname)){setTimeout(function(){j()},M.themeCass.settings.nextactivitymodaldialogdelay)}}};this.init=function(e,g){M.themeCass=e;if(M.themeCass.settings&&M.themeCass.settings.fixheadertotopofpage){a("body").append("<span style=\"display:none\" class=\"notloggedin\"></span>")}c.init();var i=function(){a(".hsuforum-discussion, .hsuforum-reply").submit(function(){setTimeout(function(){k()},3e3)})},k=function(){try{a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/cass/rest.php?action=get_"+"completion"+"&contextid="+g.contextid,success:function success(b){a(".completion-region").attr("data-content-loaded","1");a(".completion-region").html(b.html);f.addPopCompletion(g)}})}catch(a){window.console.error(a)}i()},l=function(c){b.call([{methodname:"theme_snap_course_module_completion",args:{id:c,completionstate:1},fail:function fail(a){window.console.error(a)},done:function done(){var b=a(".next_activity_area").data("completion");if(b){d.render("theme_cass/completionmodal",b).then(function(b){a(".completion-region").append(b)})}j()}}],!0,!0)};(function listeners(){a("[data-toggle=\"collapse\"]").on("click",function(){a(this).find("span.glyphicon").toggleClass("glyphicon-chevron-down glyphicon-chevron-up")});a(".completeclick").on("click",function(b){b.preventDefault();l(a(this).data("cmid"))});a(".completeclose").on("click",function(a){h("#activitycompletemodal");a.preventDefault()});if("undefined"!==g&&null!==g){if("hsuforum"===g.modname){i()}}})()}}});
//# sourceMappingURL=cass.min.js.map
