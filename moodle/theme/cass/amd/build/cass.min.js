define(["jquery","core/ajax","theme_cass/breadcrumb"],function(a,b,c){return new function(){!function(){var a=function(a){return M.cfg.wwwroot+"/pluginfile.php/"+M.cfg.contextid+"/theme_cass/"+a};require.config({paths:{"theme_cass/TweenMax":["https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min",a("vendorjs/TweenMax.min")]},shim:{"theme_cass/TweenMax":{exports:"TweenMax"}}})}();var d=this,e=function(b){a(b).show().animate({right:"20px",opacity:1},1e3)},f=function(b){a(b).animate({right:"-600px",opacity:.5},200,function(){a(b).hide()})},g=function(){e("#activitycompletemodal")},h=function(){require(["theme_cass/TweenMax"],function(b){a(".next_activity_overlay").fadeTo("slow",0,function(){a(this).hide()});var c=a("#alertBox"),d=a("#darkBackground");b.to(d,0,{display:"block"}),b.to(d,.3,{background:"rgba(0,0,0,0.4)",force3D:!0}),b.to(c,0,{left:"calc(50% - 150px)",top:"calc(50% - 150px)",delay:"0.2"}),b.to(c,0,{display:"block",opacity:1,delay:"0.2"}),b.to(c,0,{display:"block",scale:.2,opacity:0,delay:"0.2"}),b.to(c,.3,{opacity:1,force3D:!0,delay:"0.2"}),b.to(c,.3,{scale:1,force3D:!0,delay:"0.2"}),b.to(d,.2,{backgroundColor:"rgba(0,0,0,0)",force3D:!0,delay:"2"}),b.to(d,.2,{display:"none",force3D:!0,delay:"2"}),b.to(c,.2,{opacity:0,display:"none",force3D:!0,delay:"2",onComplete:g})})};this.addPopCompletion=function(a){if("undefined"!=typeof M.themeCass.settings.nextactivitymodaldialogdelay){var b=["page","book","wiki","feedback"];b.indexOf(a.modname)===-1&&setTimeout(function(){h()},M.themeCass.settings.nextactivitymodaldialogdelay)}},this.init=function(e,g){M.themeCass=e,M.themeCass.settings&&M.themeCass.settings.fixheadertotopofpage&&a("body").append('<span style="display:none" class="notloggedin"></span>'),c.init();var i=function(){a(".hsuforum-discussion, .hsuforum-reply").submit(function(){setTimeout(function(){j()},3e3)})},j=function(){var b="completion";try{a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/cass/rest.php?action=get_"+b+"&contextid="+g.contextid,success:function(b){a(".completion-region").attr("data-content-loaded","1"),a(".completion-region").html(b.html),d.addPopCompletion(g)}})}catch(c){window.console.error(c)}i()},k=function(a){b.call([{methodname:"theme_snap_course_module_completion",args:{id:a,completionstate:1},done:function(){h()},fail:function(a){window.console.error(a)}}],!0,!0)},l=function(){a('[data-toggle="collapse"]').on("click",function(){a(this).find("span.glyphicon").toggleClass("glyphicon-chevron-down glyphicon-chevron-up")}),a(".completeclick").on("click",function(b){b.preventDefault(),k(a(this).data("cmid"))}),a(".completeclose").on("click",function(a){f("#activitycompletemodal"),a.preventDefault()}),"undefined"!==g&&null!==g&&"hsuforum"===g.modname&&i()};l()}}});